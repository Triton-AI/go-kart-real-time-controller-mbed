http://os.mbed.com/users/simon/code/PwmIn/#6d68eb9b6bbbcf418a649cc457960d51ec9001e3